import{T as c,g as k}from"./utils-e474e5df.js";import"./package-b4497a7a.js";let r=await chrome.storage.sync.get(null);(async()=>{if(!r.apikey||!r.power||!r.reCap||r.RsolveType!=="audio")return;function l(){return document.querySelector("#audio-instructions")!==null||document.querySelector(".rc-doscaptcha-header")!==null}function s(){document.querySelector("#recaptcha-anchor")?.click()}const d=()=>document.querySelector(".recaptcha-checkbox")!==null;function m(){return document.querySelector(".recaptcha-checkbox")!==null}function p(){return document.querySelector(".rc-imageselect-instructions")!==null}async function h(t){document.querySelector("#recaptcha-verify-button")?.click(),a()&&await fetch(`https://audio.nocaptchaai.com/feedback?solved=true&id=${t}`,{method:"get",headers:{"Content-Type":"application/json",apikey:r.apikey}})}function a(){const t=document.querySelector(".recaptcha-checkbox")?.getAttribute("aria-checked")==="true",e=document.querySelector("#recaptcha-verify-button")?.disabled;return t||e}function n(){return document.querySelector(".rc-doscaptcha-header")?.innerText==="Try again later"}async function f(){d()&&(a()||(await c.sleep(500),r.RautoOpen&&s()))}async function y(){a()||(await c.sleep(500),document.querySelector("#recaptcha-audio-button")?.click())}async function g(){if(r.RautoSolve===!1||a()||n())return;const t=document.querySelector(".rc-audiochallenge-tdownload-link")?.href||document.querySelector("#audio-source")?.src;let e=document.querySelector("html")?.getAttribute("lang")?.trim();(!e||e.length===0)&&(e="en");const b=c.now(),q="https://audio.nocaptchaai.com/solve",[i,v]=await k(q,r.apikey,t);if(!i)return;console.log(i),document.querySelector("#audio-response").value=i;let o=parseInt(1e3);o=o||1e3;const u=o-(c.now()-b);u>0&&await c.sleep(u),await h(v)}async function S(){return[...document.querySelectorAll('iframe[src*="/recaptcha/api2/bframe"]'),...document.querySelectorAll('iframe[src*="/recaptcha/enterprise/bframe"]')].some(e=>window.getComputedStyle(e).visibility==="visible")}async function w(){return[...document.querySelectorAll('iframe[src*="/recaptcha/api2/anchor"]'),...document.querySelectorAll('iframe[src*="/recaptcha/enterprise/anchor"]')].some(e=>window.getComputedStyle(e).visibility==="visible")}for(;;)await c.sleep(1e3),await S(),await w(),m()?await f():p()?await y():l()&&await g()})();
