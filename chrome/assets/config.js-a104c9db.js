if(location.search.startsWith("?apikey=")){const a=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});chrome.storage.local.set({apikey:a.apikey,plantype:a.plan}),chrome.storage.local.get(["apikey","plantype"]).then(e=>{console.log("apikey","is := "+e.apikey),console.log("plantype","is := "+e.plantype)});const l="https://manage.nocaptchaai.com/api/user/get_endpoint";let n=a.apikey;if(n.length<0)throw new Error("empty apikey");(async()=>{let e=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",apikey:n}});if(e=await e.json(),console.log(e),e.error)chrome.storage.local.set({apikey:""}),console.log(data.message);else if(e.plan==="free"){window.alert("APIKey & FREE Plan Saved Successfully with extension");const t=[...document.querySelectorAll("[src*=newassets]")];for(const o of t){const s=o.src;o.src="about:blank",setTimeout(function(){o.src=s},10)}}else(e.plan==="daily"||e.plan==="wallet"||e.plan==="prepaid")&&window.alert("APIKey & Daily Subscription Plan Saved Successfully with extension")})()}
